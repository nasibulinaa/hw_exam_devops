# 3. Архитектура развёртки в контейнере.

Дата: 2025-11-29

## Статус

Принято

## Контекст

Приложение будет работать в контейнере. Этот контейнер нужно собирать.

## Решение

Варианты:
* Контейнеры (docker) - плюсы: легковесный формат, совместимость с serverless сервисами; минусы: сложнее настройки ОС, требуется хост с docker или готовый сервис.
* Виртуальная машина - плюсы: простота настройки; минусы: дорогое решение, могут быть особенности в зависимости от выбранной ОС.

Выбор: используем контейнеры, так как требуется возможность работы с serverless сервисах, хоть это и сложнее покупки VPS и настройки на нём приложения.
За основу взято прошлое [решение](https://github.com/nasibulinaa/mipt_ml_2024/tree/main/docker) по сборке контейнера. В нём сделаны нужные шаги для сборки оптимального контейнера.

Компромиссы: будет сложнее итоговый IaC, но будет возможность использовать cloud-сервисы дешевле.

## Последствия

Используется multi-stage сборка для минимизации размера итогового образа.
